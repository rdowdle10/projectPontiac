# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

ScreenManagement:
    MainMenu:
    A2DPScreen:
    OBD2Screen:
    SettingsScreen:
    TrafficScreen:

# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

#Main menu screen. Contains buttons that lead to the other screens providing
<ClockText>:
<ActionClock>:
    font_size: 26
    size: self.texture_size

<MainMenu>:
    name: 'main'
    FloatLayout:
        canvas:
            Rectangle:
                pos: self.pos
                size: self.size
                source: 'bg_pont.jpg'
                
    #Label for the clock (updated in main.py):
        ClockText:
            font_size: 48
            id: clocktext
            size: self.texture_size
            pos: 300, -210

    #Button for the A2DP Screen
        Button:
            on_release: app.root.current = 'a2dp'
#            text: 'Bluetooth Media'
            font_size: 16
            pos: 0, 0
            size_hint: .2, .2
            background_normal: ''
            background_color: 255, 0, 0, 0
            Image:
                source: 'bt_audio.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size: 72, 72

    #Button for the OBDII Screen
#        Button:
#            on_release: app.root.current = 'obd2'
#            text: 'OBD2 Data'
#            font_size: 16
#            pos: 0, 100
#            size_hint: .2, .2
#            background_normal: ''
#            background_color: 255, 0, 0, 0.1


    #Button for the Settings Screen
#        Button:
#            on_release: app.root.current = "settings"
#            text: 'Settings'
#            font_size: 16
#            pos: 0, 200
#           size_hint: .2, .2
#            background_normal: ''
#            background_color: 255, 0, 0, 0.1

    #Button for the Traffic screen
        Button:
            on_release: app.root.current = "traffic"
#            text: 'Traffic'
            font_size: 16
            pos: 160, 0
            size_hint: .2, .2
            background_normal: ''
            background_color: 255, 0, 0, 0
            Image:
                source: 'traffic.png'
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size: 72, 72

# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

#Begin code for the Traffic Screen
<TrafficScreen>:
    name: 'traffic'

    FloatLayout:
        canvas:
            # Picture. Will be updated to something more malleable through python
            Rectangle:
                id: 'traffic_img'
                pos: 20, 20
                size: 250, 400
                source: 'tacoma.png'
        Label:
            font_size: 14
            halign: 'left'
            pos: 0, -230
            #text_size: root.width, None
            text: 'Data is reloaded every time car is started up and connected to the internet.'

        # Labels for information corresponding to Blocked Traffic in Pierce County
        Label:
            font_size: 18
            halign: 'left'
            pos: -25, 80
            text: 'BLOCKED TRAFFIC'
        BlockedTraffic:
            pos: 50, -30
            text_size: cm(8), cm(8)
        # Labels for information corresponding to Special Events that affect traffic in Pierce County
        Label:
            font_size: 18
            halign: 'left'
            pos: -30, -80
            text: 'SPECIAL EVENTS'
        SpecialTraffic:
            halign: 'left'
            pos: 50, 100
            text_size: cm(8), cm(8)

        # Code for the actionbar
        ActionBar:
            background_color: 153,0,0,0.1
            pos_hint: {'top':1}
            ActionView:
                use_separator: True
                ActionPrevious:
                    title: 'Traffic'
                    with_previous: True
                    on_release: app.root.current = 'main'
                ActionOverflow:
                    ActionButton:
                        text: 'Settings'
                ActionClock:

# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

#Begin code for the A2DP Screen
<A2DPScreen>:
    name: 'a2dp'

#########################################################
#BEGIN SECTION WITH BUTTONS AND LABELS FOR MUSIC PLAYBACK
    FloatLayout:
        canvas:
            Rectangle:
                pos: self.pos
                size: self.size
                source: 'a2dp_bg.png'
                Button:
#PREVIOUS BUTTON
        Button:
            id: 'a2dp_prev'
            text: '<<'
            font_size: 24
            pos: 80, 140
            size_hint: .2, .1
            background_normal: ''
            background_color: 255, 0, 0, 0.1
            on_press: app.prevsongtest()
#PAUSE/PLAY BUTTON
        # Replace with button that actually pauses the music lol
        ActionTestButton:
            id: 'a2dp_control'
            text: '||'
            font_size: 24
            pos: 260, 140
            size_hint: .2, .1
            background_normal: ''
            background_color: 255, 0, 0, 0.1
            on_press: app.test()
#NEXT BUTTON
        Button:
            id: 'a2dp_next'
            text: '>>'
            font_size: 24
            pos: 440, 140
            size_hint: .2, .1
            background_normal: ''
            background_color: 255, 0, 0, 0.1
            on_press: app.nextsongtest()

#LABEL FOR SONG NAME
        SongName:
            font_size: 24
            halign: 'left'
            id: songname
            size: 42, 300
            pos: 80, 140
            text_size: root.width, None
            text:'Sorta Long Song Title Blah Blah Blah Bleh Blah'

#LABEL FOR SONG ARTIST
        SongArtist:
            font_size: 18
            halign: 'left'
            id: songartist
            size: self.texture_size
            pos: 80, 90
            text_size: root.width, None
            text: 'Song Artist Goes Here'

#LABEL FOR SONG ALBUM
        SongAlbum:
            font_size: 18
            halign: 'left'
            id: songalbum
            size: self.texture_size
            pos: 80, 45
            text_size: root.width, None
            text: 'Sorta Long Album Name Blah Blah Blah Blah Blah'

#SLIDER THAT CONTROLS SYSTEM VOLUME
# The slider works, but unfortunately upon startup, the application thinks that
# system volume is at 0 when it's not. Will need to fix. Temporary bandaid is to
# set the value at 40 for effect.
        VolumeControl:
            id: volslider
            min: 0
            max: 100
            step: 5
            orientation: 'vertical'
            pos: 480, 150
            size_hint: .5, .5
            cursor_size: 28, 28
#            sensitivity: "handle"
            value: 40
            on_touch_move: self.volUpdate()
            on_touch_down: self.volUpdate()
            on_touch_up: self.volUpdate()


#        Label:
#            id: vollevel
#            text: "Volume: " + str(volslider.value) + "%"
# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

#Begin section for A2DP Screen
    ActionBar:
        background_color: 153,0,0,0.1
        pos_hint: {'top':1}
        ActionView:
            use_separator: True
            ActionPrevious:
                title: 'A2DP'
                with_previous: True
                on_release: app.root.current = 'main'
#            ActionOverflow:
#                ActionButton:
#                    text: 'Settings'
            ActionClock:
#End code for the ADP2 Screen

# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

#Begin code for the OBD2 Screen
<OBD2Screen>:
    name: 'obd2'
    FloatLayout:
        canvas:
            Rectangle:
                pos: self.pos
                size: self.size
                source: 'a2dp_bg.png'
    ActionBar:
        background_color: 153,0,0,0.1
        pos_hint: {'top':1}
        ActionView:
            use_separator: True
            ActionPrevious:
                title: 'OBDII'
                with_previous: True
                on_release: app.root.current = 'main'
            ActionClock:
            ActionOverflow:
                ActionButton:
                    text: 'Settings'

#End code for the OBD2 Screen

# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

# ---------------------------------------------------------------------
# ---------------------------------------------------------------------

#Begin code for the Settings Screen
<SettingsScreen>:
    name: 'settings'
    ActionBar:
        background_color: 153,0,0,0.1
        pos_hint: {'top':1}
        ActionView:
            use_separator: True
            ActionPrevious:
                title: 'Settings'
                with_previous: True
                on_release: app.root.current = 'main'
            ActionClock:
            ActionOverflow:
                ActionButton:
                    text: 'About'
#End code for the Settings Screen
# ---------------------------------------------------------------------
# ---------------------------------------------------------------------
